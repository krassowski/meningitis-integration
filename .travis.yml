dist: bionic
language: python
if: tag IS present
cache:
  - pip
  - packages

python:
  - 3.7

before_install:
  - bash install_R.sh

install:
  - export MAKE='make -j 2'
  - export CPPFLAGS='-Wno-ignored-attributes -Wno-deprecated'
  - travis_wait 50 bash setup.sh

script:
  - nbpipeline --definitions_file pipeline.py

deploy:
  provider: releases
  api_key: "$GITHUB_API_KEY"
  file: "/tmp/graph.html"
  skip_cleanup: true
  draft: true

